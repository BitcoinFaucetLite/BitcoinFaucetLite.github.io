<!DOCTYPE html>
<html lang="ru">
<head>
    <link rel="icon" href="/bitcoin-svgrepo-com.svg" type="image/svg+xml">
    <meta name="yandex-verification" content="f33dd1bf5df615c4" />
    <meta name="yandex-verification" content="e60ee0276bac51c6" />
    <meta name="yandex-verification" content="e160bda428b97d9c" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- --- SEO БЛОК: Окончательно правильный для d1g1joy.github.io/LiteBitcoinFaucet/ --- -->

    <!-- Основной заголовок страницы (Title) -->
    <title>Bitcoin Кран: LITE - Бесплатный BTC и Сатоши Каждый День!</title>

    <!-- Описание для поисковиков (Description) -->
    <meta name="description" content="Bitcoin Кран: LITE - твой шанс легко получить бесплатные Биткоины (BTC) и сатоши ежедневно! Открывай кейсы, выигрывай криптовалюту на нашем увлекательном кране. Начни зарабатывать Bitcoin прямо сейчас!">

    <!-- Ключевые слова (Keywords) -->
    <meta name="keywords" content="bitcoin кран, бесплатный bitcoin, заработок bitcoin, получить btc бесплатно, btc faucet, free bitcoin, earn bitcoin, crypto faucet, сатоши бесплатно, криптовалюта бесплатно, bitcoin lite, lite bitcoin faucet, кран криптовалют 2025, ежедневный биткоин, bitcoin игры, выиграть биткоин, биткоин без вложений, free satoshi, get free crypto, btc games, win btc, crypto earn, d1g1joy faucet">

    <!-- Для поисковых роботов -->
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="googlebot" content="index, follow">
    <meta name="yandex" content="index, follow">

    <!-- Язык контента -->
    <meta http-equiv="content-language" content="ru">
    <meta name="language" content="Russian">

    <!-- Канонический URL (Очень важно!) -->
    <link rel="canonical" href="https://d1g1joy.github.io/"> 

    <!-- Информация для социальных сетей (Open Graph) -->
    <meta property="og:title" content="Bitcoin Кран: LITE - Твой Ежедневный Источник Бесплатных BTC!">
    <meta property="og:description" content="Открывай кейсы и получай бесплатные сатоши и Bitcoin каждый день на Bitcoin Кран: LITE! Простой и увлекательный заработок криптовалюты. Присоединяйся к 1000+ игроков!">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://d1g1joy.github.io/LiteBitcoinFaucet/">
    <!-- ВАЖНО: Загрузи картинку-превью для соцсетей на GitHub Pages и укажи путь к ней -->
    <!-- Например, если картинка называется promo-image.jpg и лежит в той же папке, что и index.html: -->
    <meta property="og:image" content="https://d1g1joy.github.io/LiteBitcoinFaucet/promo-image.jpg"> 
    <!-- Или полный путь, если она в другой папке, например, /images/promo-image.jpg -->
    <!-- <meta property="og:image" content="https://d1g1joy.github.io/LiteBitcoinFaucet/images/promo-image.jpg"> -->
    <meta property="og:image:width" content="1200"> <!-- Рекомендуемый размер -->
    <meta property="og:image:height" content="630"> <!-- Рекомендуемый размер -->
    <meta property="og:site_name" content="Bitcoin Кран: LITE">
    <meta property="og:locale" content="ru_RU">

    <!-- Информация для Twitter Cards -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Bitcoin Кран: LITE - Зарабатывай BTC Бесплатно Каждый День!">
    <meta name="twitter:description" content="Получай бесплатные Bitcoin и сатоши ежедневно, открывая кейсы на Bitcoin Кран: LITE. Легкий старт в мир криптовалют! Более 1000+ игроков уже с нами!">
    <!-- Используй ту же картинку, что и для Open Graph, или другую -->
    <meta name="twitter:image" content="https://d1g1joy.github.io/LiteBitcoinFaucet/promo-image.jpg"> 
    <!-- <meta name="twitter:site" content="@YourProjectTwitterHandle"> --> <!-- Если есть Twitter аккаунт -->

    <!-- Дополнительные теги -->
    <meta name="application-name" content="Bitcoin Кран: LITE">
    <meta name="theme-color" content="#ff6b6b"> <!-- Основной акцентный цвет (красный) -->
    <meta name="apple-mobile-web-app-title" content="BTC Кран LITE">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">

    <!-- Favicon (Очень важно!) -->
    <!-- Убедись, что favicon.ico лежит в корне твоего репозитория LiteBitcoinFaucet -->
    <link rel="icon" href="https://d1g1joy.github.io/LiteBitcoinFaucet/bitcoin-svgrepo-com.svg" type="image/svg+xml">
    <!-- Если у тебя есть другие размеры favicon, раскомментируй и поправь пути: -->
    <!-- <link rel="apple-touch-icon" sizes="180x180" href="https://d1g1joy.github.io/LiteBitcoinFaucet/apple-touch-icon.png"> -->
    <!-- <link rel="icon" type="image/png" sizes="32x32" href="https://d1g1joy.github.io/LiteBitcoinFaucet/favicon-32x32.png"> -->
    <!-- <link rel="icon" type="image/png" sizes="16x16" href="https://d1g1joy.github.io/LiteBitcoinFaucet/favicon-16x16.png"> -->
    <!-- <link rel="manifest" href="https://d1g1joy.github.io/LiteBitcoinFaucet/site.webmanifest"> --> <!-- Для PWA -->

    <!-- --- SEO БЛОК: Конец --- -->
    <title>Bitcoin Кран: LITE - Яркая Удача!</title>
    <style>
        :root {
            /* НОВАЯ УЛЬТРА-ЯРКАЯ ПАЛИТРА */
            --bg-color: #e9f5f8; 
            --primary-accent: #ff4757; 
            --secondary-accent: #10ac84; 
            --card-bg: #ffffff; 
            --text-color: #2c3e50; 
            --text-secondary-color: #5a697d;
            --border-color: #ced6e0; 
            --gold-color: #f39c12; 
            --green-jackpot: #54e08d; 
            --red-nothing: var(--primary-accent); 
            --balance-color: #2980b9; 
            --input-bg: #ffffff; 
            --info-block-bg: rgba(255, 255, 255, 0.9);
            --support-chat-header: var(--secondary-accent); 
            --support-chat-bg: #ffffff;
            --user-message-bg: var(--primary-accent);
            --support-message-bg: #e4e7ea;

            --roulette-item-width: 160px; 
            --roulette-item-height: 125px; 
            --roulette-container-height: var(--roulette-item-height);
        }

        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');

        body { font-family: 'Poppins', 'Inter', sans-serif; background-color: var(--bg-color); color: var(--text-color); margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; min-height: 100vh; overflow-x: hidden; line-height: 1.7; }
        .header { text-align: center; margin-bottom: 20px; }
        .header h1 { color: var(--primary-accent); font-size: 3.2em; font-weight: 700; letter-spacing: 1px; text-shadow: 1px 1px 2px rgba(0,0,0,0.05); }
        .header p { font-size: 1.15em; color: var(--text-secondary-color); margin-top: 5px; }
        .project-info-block { background-color: var(--info-block-bg); padding: 20px 30px; border-radius: 16px; margin-bottom: 30px; border: 1px solid var(--border-color); box-shadow: 0 5px 20px rgba(0,0,0,0.08); width: 100%; max-width: 700px; text-align: center; }
        .project-info-block p { margin: 10px 0; font-size: 1em; } .project-info-block strong { color: var(--primary-accent); font-weight: 600; }
        .project-info-block .highlight { font-size: 1.2em; color: var(--gold-color); font-weight: 700; display: block; margin-top: 12px; }
        .auth-user-panel { background-color: var(--card-bg); padding: 25px 30px; border-radius: 16px; margin-bottom: 30px; border: 1px solid var(--border-color); box-shadow: 0 6px 25px rgba(0,0,0,0.08); width: 100%; max-width: 500px; text-align: center; }
        
        .styled-button {
            color: #ffffff; font-weight: 600; padding: 13px 28px; border-radius: 12px; 
            transition: all 0.25s ease-out; border: none; cursor: pointer;
            text-transform: uppercase; letter-spacing: 1px; font-size: 1em; 
            margin: 8px 0px; display: block; width: 100%; box-sizing: border-box;
            text-shadow: 0 1px 1px rgba(0,0,0,0.1);
        }
        .styled-button:hover { transform: translateY(-3px) scale(1.03); box-shadow: 0 8px 18px rgba(0,0,0,0.15) !important; }
        .styled-button:disabled { background: #bdc3c7 !important; color: #7f8c8d !important; cursor: not-allowed; opacity: 0.8; box-shadow: none !important; transform: none !important; }
        
        .auth-buttons-container { display: flex; gap: 15px; } 
        .auth-buttons-container .styled-button { margin: 0; flex-grow: 1; } 
        .auth-modal-buttons-container { display: flex; flex-direction: column; gap: 12px; margin-top: 20px; } 
        .auth-modal-buttons-container .styled-button { margin: 0; }

        .case-button:not(.ad-simulation-button), #register-submit-btn, #login-submit-btn, #open-free-case.case-button, #open-premium-case.case-button { background: linear-gradient(145deg, var(--primary-accent), #e74c3c); box-shadow: 0 5px 15px rgba(255,107,107,0.35); }
        .case-button:not(.ad-simulation-button):hover, #register-submit-btn:hover, #login-submit-btn:hover, #open-free-case.case-button:hover, #open-premium-case.case-button:hover { box-shadow: 0 8px 20px rgba(255,107,107,0.45); }
        
        /* Исправленные стили для кнопок "Войти" и "Регистрация" на главной */
        #show-login-modal-btn.styled-button,
        #show-register-modal-btn.styled-button {
            background: linear-gradient(145deg, var(--secondary-accent), #2bcbba) !important; 
            box-shadow: 0 5px 15px rgba(78, 205, 196, 0.4) !important;
        }
        #show-login-modal-btn.styled-button:hover,
        #show-register-modal-btn.styled-button:hover {
            box-shadow: 0 8px 20px rgba(78, 205, 196, 0.55) !important;
        }

        #simulate-payment-received.case-button, /* Старый ID, если он остался где-то в HTML, но логика на JS его не использует */
        #payment-confirmed-by-user-btn.case-button /* Новый ID для кнопки "Я оплатил" */ { 
            background: linear-gradient(145deg, var(--green-jackpot), #2ecc71) !important; 
            box-shadow: 0 5px 15px rgba(69,224,127,0.35) !important; 
        }
        #simulate-payment-received.case-button:hover,
        #payment-confirmed-by-user-btn.case-button:hover { 
            box-shadow: 0 8px 20px rgba(69,224,127,0.45) !important; 
        }


        .logout-button { background: linear-gradient(145deg, #f39c12, #e67e22); box-shadow: 0 4px 12px rgba(243,156,18,0.3); color: #fff;}
        .logout-button:hover { box-shadow: 0 6px 18px rgba(243,156,18,0.4); }
        
        .withdraw-button, #confirm-withdrawal-btn.case-button { 
            background: linear-gradient(145deg, var(--gold-color), #f1c40f); 
            color: #ffffff !important; 
            box-shadow: 0 5px 15px rgba(254,202,87,0.45); 
        }
        .withdraw-button:hover, #confirm-withdrawal-btn.case-button:hover { 
            box-shadow: 0 8px 20px rgba(254,202,87,0.55); 
        }

        .ad-simulation-button { background: linear-gradient(145deg, var(--secondary-accent), #16a085); box-shadow: 0 5px 15px rgba(78,205,196,0.35); } 
        .ad-simulation-button:hover { box-shadow: 0 8px 20px rgba(78,205,196,0.45); }
        .close-button { background-color: #95a5a6; font-size: 1em; color: #fff;} .close-button:hover { background-color: #7f8c8d; }

        .user-info-display { font-size: 1.15em; margin-bottom: 18px; } .user-info-display strong { color: var(--primary-accent); font-weight: 600; }
        .balance-info { font-size: 1.35em; margin-bottom: 18px; } .balance-info .balance-label { font-weight: 700; color: var(--balance-color); text-shadow: 0 0 10px rgba(41,128,185,0.5); }
        .balance-info #btc-price-rub, #btc-price-last-updated { font-size: 0.8em; color: var(--text-secondary-color); display: block; margin-top: 6px; } #btc-price-last-updated { font-style: italic; font-size: 0.75em; }
        .content-wrapper { display: none; width: 100%; align-items: center; flex-direction: column; } .content-wrapper.visible { display: flex; }
        .cases-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 35px; width: 100%; max-width: 1100px; margin-top: 25px; }
        .case { background: var(--card-bg); border: 1px solid var(--border-color); border-radius: 20px; padding: 30px; padding-bottom: 20px; width: 350px; text-align: center; box-shadow: 0 12px 35px rgba(0,0,0,0.08); transition: all 0.3s cubic-bezier(.25,.8,.25,1); position: relative; overflow: hidden; display: flex; flex-direction: column; }
        .case-content { flex-grow: 1; } .case::before { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(var(--primary-accent-rgb, 255,71,87),0.15) 0%, rgba(255,255,255,0) 70%); transform: rotate(0deg); transition: transform 0.7s ease-out, opacity 0.7s ease-out; opacity: 0; z-index: 0;}
        .case:hover::before { transform: rotate(360deg); opacity: 1; } .case:hover { transform: translateY(-10px) scale(1.03); box-shadow: 0 18px 45px rgba(0,0,0,0.12); }
        .case h2 { margin-top: 0; margin-bottom: 15px; color: var(--primary-accent); font-size: 1.9em; font-weight: 600; position: relative; z-index: 1; }
        .case p { font-size: 1em; color: var(--text-secondary-color); margin-bottom: 20px; min-height: 45px; position: relative; z-index: 1;}
        .case-button.styled-button { padding: 14px 30px; font-size: 1.05em; margin-bottom: 20px; position: relative; z-index: 1;}
        .case-odds-details { margin-top: auto; padding: 15px; background-color: rgba(0,0,0,0.02); border-radius: 12px; border-top: 1px solid var(--border-color); font-size: 0.9em; position: relative; z-index: 1;}
        .case-odds-details h4 { margin-top: 0; margin-bottom: 12px; font-size: 1.2em; text-align: center; font-weight: 600; color: var(--primary-accent); }
        .odds-list { list-style-type: none; padding: 0; margin: 0; } .odds-list li { display: flex; justify-content: space-between; align-items: center; padding: 7px 5px; border-bottom: 1px dashed var(--border-color); }
        .odds-list li:last-child { border-bottom: none; } .odds-prize-label { color: var(--text-color); flex-basis: 70%; text-align: left; }
        .odds-prize-chance { color: var(--text-secondary-color); font-weight: 500; flex-basis: 30%; text-align: right; }
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(var(--bg-color-rgb, 233,245,249),0.8); justify-content: center; align-items: center; backdrop-filter: blur(10px); }
        .modal-content { background-color: var(--card-bg); padding: 35px; border-radius: 18px; width: 90%; max-width: 500px; text-align: center; box-shadow: 0 15px 50px rgba(0,0,0,0.15); animation: scaleIn 0.35s cubic-bezier(0.165,0.84,0.44,1); border: 1px solid var(--border-color); }
        .modal-content.roulette-modal-content { max-width: 750px; padding: 40px; } .modal-content h2 { color: var(--primary-accent); margin-top:0; margin-bottom: 28px; font-size: 1.8em;}
        @keyframes scaleIn { from { opacity: 0; transform: scale(0.85); } to { opacity: 1; transform: scale(1); } }
        .prize-display-final { font-size: 2.4em; margin: 28px 0 18px 0; padding: 18px; border-radius: 12px; display: inline-block; background-color: var(--input-bg); min-width: 220px; min-height: 1.6em; box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);}
        .win-common { color: var(--text-color); background-color: var(--input-bg); } .win-rare { color: var(--gold-color); text-shadow: 0 0 12px var(--gold-color); background-color: rgba(254,202,87,0.15); }
        .win-jackpot { color: #fff; background: linear-gradient(45deg, var(--green-jackpot), #30cb6d); text-shadow: 0 0 15px #fff;} .win-nothing { color: var(--red-nothing); background-color: rgba(255,107,107,0.1); }
        .roulette-wrapper { width: 100%; height: var(--roulette-container-height); background-color: var(--input-bg); border: 2px solid var(--border-color); border-radius: 12px; overflow: hidden; position: relative; margin-bottom: 25px; padding: 0; box-shadow: inset 0 0 15px rgba(0,0,0,0.05);}
        .roulette-pointer { position: absolute; left: 50%; top: 0; bottom: 0; width: 4px; background: var(--primary-accent); transform: translateX(-50%); z-index: 10; box-shadow: 0 0 15px rgba(0,209,178,0.7); border-radius: 2px; }
        .roulette-strip { display: flex; height: 100%; }
        .roulette-item { min-width: var(--roulette-item-width); max-width: var(--roulette-item-width); height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; font-size: 1.1em; font-weight: 600; box-sizing: border-box; padding: 10px; text-align: center; border-right: 1px solid var(--border-color); transition: background-color 0.2s ease; background-clip: padding-box; line-height: 1.25; }
        .roulette-item span { display: block; } .roulette-item .value { font-size: 1.3em; color: var(--text-color); } .roulette-item .unit { font-size: 0.85em; color: var(--text-secondary-color); margin-top: 3px; } 
        .roulette-item:last-child { border-right: none; }
        .roulette-item.item-common { background-color: var(--card-bg); } .roulette-item.item-common .value {color: var(--text-color);} .roulette-item.item-common .unit {color: var(--text-secondary-color);}
        .roulette-item.item-rare { background-color: rgba(254,202,87,0.1); } .roulette-item.item-rare .value, .roulette-item.item-rare .unit {color: var(--gold-color);}
        .roulette-item.item-jackpot { background-color: rgba(69,224,127,0.15); } .roulette-item.item-jackpot .value, .roulette-item.item-jackpot .unit {color: var(--green-jackpot);}
        .roulette-item.item-nothing { background-color: rgba(255,107,107,0.08); } .roulette-item.item-nothing .value, .roulette-item.item-nothing .unit {color: var(--red-nothing);}
        .form-group { margin-bottom: 20px; text-align: left; } .form-group label { display: block; margin-bottom: 8px; font-weight: 500; color: var(--text-secondary-color); font-size: 1em; }
        .form-group input[type="text"], .form-group input[type="email"], .form-group input[type="password"], .form-group input[type="number"] { width: calc(100% - 24px); padding: 12px; background-color: var(--input-bg); border: 1px solid var(--border-color); border-radius: 10px; color: var(--text-color); font-size: 1em; }
        .form-group input:focus { outline: none; border-color: var(--primary-accent); box-shadow: 0 0 0 3px rgba(0,209,178,0.2); }
        .form-error-message { color: var(--red-nothing); font-size: 0.9em; text-align: left; margin-top: 6px; }
        .auth-modal-buttons-container .styled-button { width: 100%; padding: 12px; font-size: 1em; margin-top: 0; }
        #withdrawal-modal .modal-content { max-width: 520px; } .info-text { font-size: 0.9em; margin-bottom: 12px; }
        #withdrawal-message { margin-top: 20px; padding: 12px; border-radius: 10px; font-weight: 500; }
        #withdrawal-message.success { background-color: rgba(77,208,128,0.1); color: var(--green-jackpot); border: 1px solid var(--green-jackpot); }
        #withdrawal-message.error { background-color: rgba(255,107,107,0.1); color: var(--red-nothing); border: 1px solid var(--red-nothing); }
        #amount-to-receive-info { margin-top: 5px; font-size: 0.85em; }
        #deposit-btc-address-display { font-size: 1.1em; color: var(--gold-color); word-break: break-all; background-color: var(--input-bg); padding: 18px; border-radius: 12px; margin: 22px 0; border: 1px solid var(--border-color); line-height: 1.5; box-shadow: inset 0 0 10px rgba(0,0,0,0.05); }
        #deposit-modal .modal-content p { font-size: 1em; }
        #support-chat-button { position: fixed; bottom: 25px; right: 25px; background-color: var(--primary-accent); color: white; width: 60px; height: 60px; border-radius: 50%; box-shadow: 0 4px 15px rgba(0,0,0,0.15); font-size: 28px; line-height: 60px; text-align: center; cursor: pointer; z-index: 1001; transition: transform 0.2s ease-out;}
        #support-chat-button:hover { transform: scale(1.1); }
        #support-chat-window { display: none; position: fixed; bottom: 100px; right: 25px; width: 320px; height: 450px; background-color: var(--support-chat-bg); border-radius: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.15); z-index: 1000; display: flex; flex-direction: column; overflow: hidden; border: 1px solid var(--border-color);}
        #support-chat-window .chat-header { background-color: var(--support-chat-header); color: white; padding: 15px; text-align: center; font-weight: 600; font-size: 1.1em; }
        #support-chat-window .chat-messages { flex-grow: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px;}
        #support-chat-window .message { padding: 10px 15px; border-radius: 18px; max-width: 80%; line-height: 1.4; font-size:0.95em;}
        #support-chat-window .message.user { background-color: var(--user-message-bg); color: white; align-self: flex-end; border-bottom-right-radius: 5px;}
        #support-chat-window .message.support { background-color: var(--support-message-bg); color: var(--text-color); align-self: flex-start; border-bottom-left-radius: 5px;}
        #support-chat-window .chat-input-area { display: flex; padding: 10px; border-top: 1px solid var(--border-color); background-color: #f0f4f8; }
        #support-chat-window .chat-input-area input { flex-grow: 1; padding: 10px; border: 1px solid var(--border-color); border-radius: 20px; margin-right: 10px; font-size: 0.9em; background-color: var(--input-bg); color: var(--text-color);}
        #support-chat-window .chat-input-area button { background-color: var(--primary-accent); color: white; padding: 10px 15px; border: none; border-radius: 20px; cursor: pointer; font-weight: 500;}
        footer { text-align: center; padding: 25px 15px; margin-top: 40px; border-top: 1px solid var(--border-color); width: 100%; box-sizing: border-box; background-color: var(--card-bg); box-shadow: 0 -2px 10px rgba(0,0,0,0.05); }
        footer p { margin: 5px 0; font-size: 0.9em; color: var(--text-secondary-color); } footer a { color: var(--primary-accent); text-decoration: none; font-weight: 500; }
        footer a:hover { text-decoration: underline; }
        #terms-modal .modal-content { max-width: 700px; text-align: left; max-height: 80vh; overflow-y: auto; }
        #terms-modal .modal-content h2 { text-align: center; margin-bottom: 20px; }
        #terms-modal .modal-content article p { margin-bottom: 12px; line-height: 1.7; color: var(--text-color); font-size: 0.95em; }
        #terms-modal .modal-content article strong { color: var(--primary-accent); font-weight: 600; }
        #terms-modal .modal-content article h3 { color: var(--secondary-accent); margin-top: 20px; margin-bottom: 10px; font-size: 1.2em; border-bottom: 1px solid var(--border-color); padding-bottom: 5px; }
        @media (max-width: 820px) { .cases-container { flex-direction: column; align-items: center; } .case { width: 90%; max-width: 430px; } }
        @media (max-width: 768px) { .header h1 { font-size: 2.2em; } .case { padding: 22px; padding-bottom: 15px; } .modal-content, .modal-content.roulette-modal-content { width: 95%; padding: 22px; } :root { --roulette-item-width: 95px; --roulette-item-height: 85px;} .roulette-item { font-size: 0.8em; } .prize-display-final { font-size: 1.7em; } .case-odds-details { font-size: 0.75em; padding: 8px; } .case-odds-details h4 {font-size: 0.95em;} .auth-user-panel { padding: 15px; max-width: 90%;} .balance-info {font-size: 1.2em;} .styled-button {font-size: 0.85em; padding: 9px 18px;} .modal-content h2 { font-size: 1.5em; margin-bottom: 20px;} .form-group input[type="text"], .form-group input[type="email"], .form-group input[type="password"], .form-group input[type="number"] { padding: 10px; font-size: 0.9em;} #support-chat-window {width: calc(100% - 40px); right: 20px; bottom: 90px; height: 70%; max-height: 400px;} #register-modal .auth-modal-buttons-container .styled-button {width: 100%; margin-bottom: 10px;} #register-modal .auth-modal-buttons-container .styled-button:first-child {margin-right: 0;} }
        @media (max-width: 400px) { :root { --roulette-item-width: 80px; --roulette-item-height: 75px;} .styled-button.case-button { padding: 10px 22px; font-size: 0.95em;} .auth-buttons-container {flex-direction: column;} } 
    </style>
</head>
<body>
    <div class="header"> <h1>Bitcoin Кран: LITE</h1> <p>Начни получать бесплатную крипту уже сейчас!</p> </div>
    <div class="project-info-block"> <p><strong>Проект "Bitcoin Кран: LITE"</strong> успешно стартовал <strong>12.06.2025!</strong></p> <p>К нам присоединилось уже более <strong>1000+</strong> активных игроков, и это только начало!</p> <p class="highlight">Мы ценим каждого и стремимся к максимальной прозрачности и честности!</p> </div>
    <div style="display: flex; justify-content: center; margin: 20px 0;"> 
        <script type="text/javascript">
            atOptions = {
                'key' : '6719b93b820319bf411601cd84c20e97',
                'format' : 'iframe',
                'height' : 250,
                'width' : 300,
                'params' : {}
            };
        </script>
        <script type="text/javascript" src="//www.highperformanceformat.com/6719b93b820319bf411601cd84c20e97/invoke.js"></script>
    </div>
    <div class="auth-user-panel"> <div id="auth-section"> <p style="margin-bottom: 15px; font-size: 1.05em;">Войдите или зарегистрируйтесь, чтобы начать игру!</p> <div class="auth-buttons-container"> <button id="show-login-modal-btn" class="styled-button">Войти</button> <button id="show-register-modal-btn" class="styled-button">Регистрация</button> </div> </div> <div id="user-section" style="display:none;"> <div class="user-info-display"> Привет, <strong id="logged-in-username">Игрок</strong>! </div> <div class="balance-info"> Баланс: <span class="balance-label" id="user-balance-btc">0.00000000</span> BTC (<span class="balance-label" id="user-balance-rub">0.00</span> RUB) <span id="btc-price-rub">1 BTC ≈ Загрузка... RUB</span> <span id="btc-price-last-updated"></span> </div> <div style="display: flex; justify-content: space-around; width:100%; margin-top:10px; gap: 10px;"> <button class="styled-button withdraw-button" id="show-withdrawal-modal-btn" style="flex-grow:1;">Вывести</button> <button class="styled-button logout-button" id="logout-btn" style="flex-grow:1;">Выйти</button> </div> </div> </div>
    <div id="main-content-wrapper" class="content-wrapper"> <div class="cases-container"> <div class="case" id="free-case-card"> <div class="case-content"> <h2>Бесплатный кейс</h2> <p>Открыть за просмотр рекламы. Каждое открытие может быть удачным!</p> <button class="styled-button case-button ad-simulation-button" id="open-free-case-ad">Смотреть рекламу</button> <button class="styled-button case-button" id="open-free-case" style="display:none;">Открыть Бесплатный кейс</button> </div> <div class="case-odds-details" id="free-case-odds"></div> </div> <div class="case" id="premium-case-card"> <div class="case-content"> <h2>Премиальный кейс</h2> <p>Стоимость: <span id="premium-case-cost-btc">0.000059</span> BTC (<span id="premium-case-cost-rub">~???</span> RUB).Внутри настоящие ценности!</p> <button class="styled-button case-button" id="open-premium-case">Открыть Премиальный кейс</button> </div> <div class="case-odds-details" id="premium-case-odds"></div> </div> </div> </div>
    <div id="register-modal" class="modal"> <div class="modal-content"> <h2>Регистрация</h2> <div class="form-group"><label for="register-username">Имя (a-z,0-9,_, мин 6):</label><input type="text" id="register-username"><div class="form-error-message" id="register-username-error"></div></div> <div class="form-group"><label for="register-email">Email:</label><input type="email" id="register-email"><div class="form-error-message" id="register-email-error"></div></div> <div class="form-group"><label for="register-password">Пароль (мин 8):</label><input type="password" id="register-password"><div class="form-error-message" id="register-password-error"></div></div> <div class="auth-modal-buttons-container"> <button id="register-submit-btn" class="styled-button">Регистрация</button> <button id="close-register-modal-btn" class="styled-button close-button">Закрыть</button> </div> <div id="register-message" style="margin-top:15px;"></div> </div> </div>
    <div id="login-modal" class="modal"> <div class="modal-content"> <h2>Вход</h2> <div class="form-group"><label for="login-username">Имя:</label><input type="text" id="login-username"></div> <div class="form-group"><label for="login-password">Пароль:</label><input type="password" id="login-password"></div> <div class="auth-modal-buttons-container"><button id="login-submit-btn" class="styled-button">Войти</button> <button id="close-login-modal-btn" class="styled-button close-button">Закрыть</button></div> <div id="login-message" style="margin-top:15px;"></div> </div> </div>
    <div id="result-modal" class="modal"> <div class="modal-content roulette-modal-content"> <h2>Вскрытие...</h2> <div class="roulette-wrapper"><div class="roulette-pointer"></div><div class="roulette-strip" id="roulette-strip-content"></div></div> <div id="prize-text-final" class="prize-display-final">Вращение...</div> <p id="prize-value-rub"></p> <button id="close-modal" class="styled-button close-button" disabled>ОК</button> </div> </div>
    <div id="deposit-modal" class="modal"> <div class="modal-content"> <h2 style="color: var(--primary-accent);">Покупка Премиум кейса</h2> <div id="deposit-info-block"> <p>Для открытия (<span id="premium-case-cost-btc-modal-display">0.000059</span> BTC / <span id="premium-case-cost-rub-modal-display">~???</span> RUB), пожалуйста, совершите перевод <strong>точной суммы</strong> на следующий Bitcoin адрес:</p> <div id="deposit-btc-address-display" style="font-size: 1.1em; color: var(--gold-color); word-break: break-all; background-color: var(--input-bg); padding: 18px; border-radius: 12px; margin: 22px 0; border: 1px solid var(--border-color); line-height: 1.5; box-shadow: inset 0 0 10px rgba(0,0,0,0.05);"> ЗАГРУЗКА АДРЕСА... </div> <p style="font-size:0.9em; color: var(--text-secondary-color); margin-top:15px;"><i>Этот адрес уникален. После перевода BTC, нажмите кнопку "Я оплатил".</i></p> <p style="font-weight:bold; color:var(--red-nothing); margin-top: 15px;">ВНИМАНИЕ: ОТПРАВЛЯЙТЕ РОВНО ТУ СУММУ, КОТОРАЯ УКАЗАНА!</p> <button id="payment-confirmed-by-user-btn" class="styled-button case-button">Я оплатил</button> </div> <div id="waiting-for-deposit-message" style="display:none; margin-top: 20px;"> <p style="font-size: 1.1em; color: var(--text-color);">Ожидание подтверждения вашего депозита на адрес <strong id="waiting-deposit-address" style="color: var(--gold-color); word-break: break-all;"></strong>.</p> <p style="font-size: 1.1em; color: var(--primary-accent); font-weight: 600;">Пожалуйста, НЕ закрывайте эту страницу!</p> <p style="font-size: 0.9em; color: var(--text-secondary-color);">Время ожидания может составить до 20 минут.</p> </div> <button id="close-deposit-modal-btn-new" class="styled-button close-button" style="margin-top: 20px;">Закрыть</button> </div> </div>
    <div id="withdrawal-modal" class="modal"> <div class="modal-content"> <h2>Вывод</h2> <div class="info-text">Баланс: <strong id="withdrawal-current-balance-btc">0.00000000</strong> BTC</div> <div class="info-text">Мин: <strong>0.00005</strong> BTC. Ком: <strong>0.00001</strong> BTC.</div> <div class="form-group"><label for="withdrawal-amount-btc">Сумма (BTC):</label><input type="number" id="withdrawal-amount-btc" step="1e-8"><div id="amount-to-receive-info">К получению: 0 BTC</div></div> <div class="form-group"><label for="withdrawal-address-btc">Адрес BTC:</label><input type="text" id="withdrawal-address-btc"></div> <div class="auth-modal-buttons-container"><button id="confirm-withdrawal-btn" class="styled-button case-button">Подтвердить</button> <button id="close-withdrawal-modal-btn" class="styled-button close-button">Отмена</button></div> <div id="withdrawal-message" style="display:none;"></div> </div> </div>
    <footer><p>INFO: 1 Сатоши (sat) = 0.00000001 ฿ (BTC)</p> <p>© 2025 Bitcoin Кран: LITE. Все права защищены.</p> <p><a href="#" id="show-terms-link">Пользовательское соглашение</a></p> <p>Поддержка: <a href="mailto:support@bitcoinfaucetlite.xyz">support@bitcoinfaucetlite.xyz</a></p> </footer>
    <div id="terms-modal" class="modal"> <div class="modal-content"> <h2>Пользовательское Соглашение "Bitcoin Кран: LITE"</h2> <article> <p>Добро пожаловать на платформу "Bitcoin Кран: LITE" (далее – "Платформа", "Сайт", "Сервис")! Используя данный Сервис, вы (далее – "Пользователь") полностью и безоговорочно принимаете настоящее Пользовательское соглашение (далее – "Соглашение"). Если вы не согласны с условиями Соглашения, пожалуйста, не используйте Платформу.</p> <h3>1. Общие положения</h3> <p>1.1. Платформа "Bitcoin Кран: LITE" является игровым симулятором и предоставляется "как есть", без каких-либо явных или подразумеваемых гарантий. Администрация Платформы (далее – "Администрация") не гарантирует бесперебойную работу Сервиса, отсутствие ошибок или достижение Пользователем каких-либо финансовых результатов.</p> <p>1.2. Все операции с виртуальной валютой (сатоши, BTC), отображаемые на Платформе, являются частью игрового процесса и не имеют реальной финансовой ценности вне Платформы. Отображаемый баланс является исключительно игровой характеристикой.</p> <h3>2. Регистрация и Аккаунт</h3> <p>2.1. Для использования некоторых функций Платформы может потребоваться регистрация. Пользователь обязуется предоставлять достоверную информацию при регистрации.</p> <p>2.2. Пользователь несет полную ответственность за сохранность своих учетных данных (логина и пароля) и за все действия, совершенные под его аккаунтом.</p> <h3>3. Игровой процесс и "Выплаты"</h3> <p>3.1. Платформа предоставляет игровые механики, такие как "кейсы", результат открытия которых определяется случайным образом на основе заранее заданных вероятностей, отображаемых на Сайте.</p> <p>3.2. <strong>Важное Уведомление о Выплатах:</strong> Пользователь признает и соглашается, что функция "вывода средств" на Платформе является частью игрового симулятора. Администрация Сайта оставляет за собой полное и неограниченное право по своему единоличному усмотрению определять возможность, условия, лимиты, сроки и сам факт осуществления "выплат" виртуальных игровых единиц. <strong>Администрация не несет никаких обязательств по конвертации виртуальных игровых единиц в реальные денежные средства или криптовалюту и вправе отказать в "выплате" без объяснения причин, особенно в случаях подозрения на мошеннические действия, нарушение настоящего Соглашения или по техническим причинам.</strong> Отображение успешной "заявки на вывод" не гарантирует фактического получения средств Пользователем.</p> <p>3.3. Любые "депозиты" или "покупки" на Платформе рассматриваются как добровольные пожертвования на поддержку игрового процесса и не подлежат возврату.</p> <h3>4. Ограничение ответственности</h3> <p>4.1. Администрация не несет ответственности за любые прямые или косвенные убытки, понесенные Пользователем в результате использования или невозможности использования Платформы.</p> <p>4.2. Платформа предоставляется в развлекательных целях. Любые ожидания финансовой выгоды от использования Платформы являются необоснованными.</p> <h3>5. Изменение Соглашения</h3> <p>5.1. Администрация оставляет за собой право в любое время изменять настоящее Соглашение без предварительного уведомления Пользователей. Новая редакция Соглашения вступает в силу с момента ее публикации на Сайте.</p> <p>Продолжая использовать Платформу, вы подтверждаете, что ознакомились и согласны со всеми пунктами данного Соглашения.</p> </article> <button id="close-terms-modal-btn" class="styled-button close-button" style="margin-top: 20px;">Я ознакомлен и согласен</button> </div> </div>
    <div id="support-chat-button">💬</div>
    <div id="support-chat-window" style="display: none;"> <div class="chat-header">Техническая Поддержка</div> <div class="chat-messages" id="chat-messages-area"></div> <div class="chat-input-area"> <input type="text" id="chat-user-input" placeholder="Введите ваше сообщение..."> <button id="chat-send-btn" class="styled-button" style="padding: 10px 15px; font-size: 1em; margin:0; width: auto;">➤</button> </div> </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            console.log("DOM Fully Loaded - ABSOLUTELY FINAL JS - BELIEVE IT!");
            // --- КОНФИГУРАЦИЯ ---
            let BTC_TO_RUB_RATE = 6000000; 
            const BTC_TO_RUB_RATE_FALLBACK = 6000000;
            const PREMIUM_CASE_COST_BTC = 0.000059;
            const ROULETTE_ITEMS_COUNT = 150; 
            const ROULETTE_SPIN_DURATION = 12000; 
            const MIN_WITHDRAWAL_BTC = 0.00005;
            const SIMULATED_FEE_BTC = 0.00001;

            const freeCasePrizes = [
                { value: "1", unit: "сатоши", prize: 1, probability: 0.50, styleClass: 'item-common', finalStyle: 'win-common', label: "1 сатоши" },       
                { value: "10", unit: "сатоши", prize: 10, probability: 0.38, styleClass: 'item-common', finalStyle: 'win-common', label: "10 сатоши" },     
                { value: "100", unit: "сатоши", prize: 100, probability: 0.11, styleClass: 'item-rare', finalStyle: 'win-rare', label: "100 сатоши" },       
                { value: "0.005", unit: "BTC", prize: 500000, probability: 0.01, styleClass: 'item-jackpot', finalStyle: 'win-jackpot', label: "0.005 BTC" } 
            ];
            const premiumCasePrizes = [ 
                { value: "Пусто", unit: ":(", prize: 0, probability: 0.25, styleClass: 'item-nothing', finalStyle: 'win-nothing', label: "Пусто :(" },
                { value: "0.00008", unit: "BTC", prize: 0.00008, probability: 0.35, styleClass: 'item-common', finalStyle: 'win-common', label: "0.00008 BTC" },
                { value: "0.0005", unit: "BTC", prize: 0.0005, probability: 0.25, styleClass: 'item-rare', finalStyle: 'win-rare', label: "0.0005 BTC" },
                { value: "0.01", unit: "BTC", prize: 0.01, probability: 0.15, styleClass: 'item-jackpot', finalStyle: 'win-jackpot', label: "0.01 BTC" }
            ];
            const DEPOSIT_ADDRESSES_POOL = ["bc1q50dp3lwa7h3uqmm83ty3wc7g0az4qd7pue39l7", "bc1q9mjzx70c3f0zus2h472y2h6zqe9csn9q0speww", "bc1qlykqzumamn7w4mw746ptsaphe6gnjhxfzuvesl", "bc1qm6wdhjkrpd7r9enj50g0qclzhnzt9g79w8v9nk", "bc1qmd9r2jvq4decqwtsxs4ngpwdae98z7833a5vmr", "bc1q4q9emg2v0gnu8v4zhv8wjnt8qdlhnxnwh4p8yk", "bc1qquy3lar7vmr0w0kqpjyycxleqkmc8zjlexqjs0", "bc1qcnwh8ecrxl060meamvc3wuvt3typ8t3p0wzrt7", "bc1q3mk92vg2cpf504vnru28jtkhmktadrk0u9u6y5", "bc1qc73eulvksqxws4w3rm320xe8unkwpzukdyq5ul"];
            let currentDepositAddress = ""; 
            let currentUser = null; 
            let registeredUsers = []; 
            let userBalanceSatoshi = 0;

            const dom = {};
            const ids = [
                'user-balance-btc','user-balance-rub','btc-price-rub','btc-price-last-updated','auth-section',
                'user-section','logged-in-username','main-content-wrapper','show-login-modal-btn',
                'show-register-modal-btn','login-modal','register-modal','close-login-modal-btn',
                'close-register-modal-btn','register-username','register-username-error','register-email',
                'register-email-error','register-password','register-password-error','register-submit-btn',
                'register-message','login-username','login-password','login-submit-btn','login-message',
                'logout-btn','open-free-case-ad','open-free-case','open-premium-case','premium-case-cost-btc',
                'premium-case-cost-rub','result-modal','prize-text-final','prize-value-rub','close-modal',
                'roulette-strip-content','deposit-modal',
                'deposit-info-block', 
                'premium-case-cost-btc-modal-display', 
                'premium-case-cost-rub-modal-display', 
                'deposit-btc-address-display', 
                'payment-confirmed-by-user-btn',     
                'waiting-for-deposit-message',       
                'waiting-deposit-address',           
                'close-deposit-modal-btn-new',       
                'free-case-odds','premium-case-odds','show-withdrawal-modal-btn','withdrawal-modal',
                'withdrawal-current-balance-btc','withdrawal-amount-btc','withdrawal-address-btc',
                'confirm-withdrawal-btn','withdrawal-message','close-withdrawal-modal-btn',
                'amount-to-receive-info', 'support-chat-button', 'support-chat-window', 
                'chat-messages-area', 'chat-user-input', 'chat-send-btn', 
                'show-terms-link', 'terms-modal', 'close-terms-modal-btn'
            ];
            ids.forEach(id => { 
                const el = document.getElementById(id); 
                if (el) {
                    dom[id.replace(/-/g, '_')] = el; 
                } else {
                    console.warn(`DOM element with ID '${id}' not found. This might cause errors if it's critical.`);
                }
            });

            function updateAuthUI() { if(currentUser){if(dom.auth_section)dom.auth_section.style.display='none';if(dom.user_section){dom.user_section.style.display='flex';dom.user_section.style.flexDirection='column';dom.user_section.style.alignItems='center';}if(dom.main_content_wrapper)dom.main_content_wrapper.classList.add('visible');if(dom.logged_in_username)dom.logged_in_username.textContent=currentUser.username;}else{if(dom.auth_section)dom.auth_section.style.display='block';if(dom.user_section)dom.user_section.style.display='none';if(dom.main_content_wrapper)dom.main_content_wrapper.classList.remove('visible');if(dom.logged_in_username)dom.logged_in_username.textContent='Гость';if(dom.user_balance_btc)dom.user_balance_btc.textContent="0.00000000";if(dom.user_balance_rub)dom.user_balance_rub.textContent="0.00";}}
            function saveUsers() { localStorage.setItem('regUsers_LiteV4_JS_Complete', JSON.stringify(registeredUsers)); } 
            function loadUsers() { const u = localStorage.getItem('regUsers_LiteV4_JS_Complete'); if (u) registeredUsers = JSON.parse(u); else registeredUsers = []; }
            function saveSession() { if (currentUser) localStorage.setItem('currUser_LiteV4_JS_Complete', JSON.stringify(currentUser)); else localStorage.removeItem('currUser_LiteV4_JS_Complete'); }
            function loadSession() { const u = localStorage.getItem('currUser_LiteV4_JS_Complete'); if (u) currentUser = JSON.parse(u); }
            function valUser(u) { if(dom.register_username_error) dom.register_username_error.textContent=''; if(u.length<6){if(dom.register_username_error)dom.register_username_error.textContent='Мин 6';return false;}if(!/^[a-zA-Z0-9_]+$/.test(u)){if(dom.register_username_error)dom.register_username_error.textContent='a-z,0-9,_';return false;}return true;}
            function valEmail(e) { if(dom.register_email_error) dom.register_email_error.textContent=''; if(!e.includes('@')||!e.includes('.')){if(dom.register_email_error)dom.register_email_error.textContent='Email некорректен';return false;}return true;}
            function valPass(p) { if(dom.register_password_error) dom.register_password_error.textContent=''; if(p.length<8){if(dom.register_password_error)dom.register_password_error.textContent='Мин 8';return false;}return true;}
            function regUser() { const u=dom.register_username.value.trim(),e=dom.register_email.value.trim(),p=dom.register_password.value; if(!valUser(u)||!valEmail(e)||!valPass(p)){if(dom.register_message)dom.register_message.textContent='';return;} registeredUsers.push({username:u,email:e,password:p,balanceSatoshi:0});saveUsers(); if(dom.register_message){dom.register_message.style.color='var(--green-jackpot)';dom.register_message.textContent='Успех! Войдите.';} dom.register_username.value='';dom.register_email.value='';dom.register_password.value=''; setTimeout(()=>{if(dom.register_modal)dom.register_modal.style.display='none';if(dom.register_message)dom.register_message.textContent='';},2000); }
            function loginUser() { const u=dom.login_username.value.trim(),p=dom.login_password.value; const user=registeredUsers.find(usr=>usr.username===u&&usr.password===p); if(user){currentUser=user;userBalanceSatoshi=currentUser.balanceSatoshi;saveSession();updateAuthUI();updateBalanceDisplay();if(dom.login_modal)dom.login_modal.style.display='none';if(dom.login_message)dom.login_message.textContent='';dom.login_username.value='';dom.login_password.value='';}else{if(dom.login_message){dom.login_message.style.color='var(--red-nothing)';dom.login_message.textContent='Ошибка входа.';}}}
            function logoutUser() { if(currentUser){const uDb=registeredUsers.find(u=>u.username===currentUser.username);if(uDb)uDb.balanceSatoshi=userBalanceSatoshi;saveUsers();} currentUser=null;userBalanceSatoshi=0;saveSession();updateAuthUI();updateBalanceDisplay(); }
            function displayOdds(cfg, cont) { if(!cont){console.error("Odds container MISSING for:", cfg);return;} console.log("Displaying odds for:", cont.id); let h=cont.querySelector('h4');if(!h){h=document.createElement('h4');h.textContent="Возможные награды:";cont.appendChild(h);} let l=cont.querySelector('.odds-list');if(!l){l=document.createElement('ul');l.className='odds-list';cont.appendChild(l);} l.innerHTML=''; cfg.forEach(p=>{const li=document.createElement('li');let prc;if(p.probability<0.0001)prc=(p.probability*100).toFixed(3);else if(p.probability<0.01)prc=(p.probability*100).toFixed(2);else if(p.probability<0.1)prc=(p.probability*100).toFixed(1);else prc=(p.probability*100).toFixed(0); li.innerHTML=`<span class="odds-prize-label">${p.label}</span><span class="odds-prize-chance">${prc}%</span>`;l.appendChild(li);}); }
            async function getPrice() { console.log("getPrice called (v.JS_COMPLETE)"); try { const r=await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=rub'); if(!r.ok)throw new Error(`API Err ${r.status} - ${r.statusText}`); const d=await r.json(); if(d.bitcoin&&d.bitcoin.rub){BTC_TO_RUB_RATE=d.bitcoin.rub;if(dom.btc_price_last_updated)dom.btc_price_last_updated.textContent=`Курс: ${new Date().toLocaleTimeString()}`;}else throw new Error('API data invalid'); console.log("Price OK:",BTC_TO_RUB_RATE); }catch(e){console.error("Price fetch err:",e);BTC_TO_RUB_RATE=BTC_TO_RUB_RATE_FALLBACK;if(dom.btc_price_last_updated)dom.btc_price_last_updated.textContent=`Ошибка курса`;}finally{updateAllDisplays();}}
            function updateAllDisplays() { console.log("updateAllDisplays called, rate:", BTC_TO_RUB_RATE); if(dom.btc_price_rub)dom.btc_price_rub.textContent=`1 BTC ≈ ${BTC_TO_RUB_RATE.toLocaleString('ru-RU',{minimumFractionDigits:0,maximumFractionDigits:0})} RUB`; if(dom.premium_case_cost_rub)dom.premium_case_cost_rub.textContent=`~${(PREMIUM_CASE_COST_BTC*BTC_TO_RUB_RATE).toFixed(0)} RUB`; if(dom.premium_case_cost_rub_modal_display)dom.premium_case_cost_rub_modal_display.textContent=`~${(PREMIUM_CASE_COST_BTC*BTC_TO_RUB_RATE).toFixed(0)} RUB`; updateBalanceDisplay(); }
            function initialize() { console.log("Initializing App vJS_COMPLETE..."); loadUsers();loadSession(); if(currentUser)userBalanceSatoshi=currentUser.balanceSatoshi;else userBalanceSatoshi=0; updateAuthUI(); getPrice().then(()=>{console.log("Initial price fetched (vJS_COMPLETE), updating UI."); if(dom.premium_case_cost_btc)dom.premium_case_cost_btc.textContent=PREMIUM_CASE_COST_BTC.toFixed(8);if(dom.premium_case_cost_btc_modal_display)dom.premium_case_cost_btc_modal_display.textContent=PREMIUM_CASE_COST_BTC.toFixed(8);if(dom.free_case_odds)displayOdds(freeCasePrizes,dom.free_case_odds);else console.error("FATAL: dom.free_case_odds not found!");if(dom.premium_case_odds)displayOdds(premiumCasePrizes,dom.premium_case_odds);else console.error("FATAL: dom.premium_case_odds not found!");updateBalanceDisplay();}).catch(e => console.error("Error in getPrice.then chain during init:", e)); setInterval(getPrice,300000); }
            function updateBalanceDisplay(){const bV=userBalanceSatoshi/1e8;if(dom.user_balance_btc)dom.user_balance_btc.textContent=bV.toFixed(8);if(dom.user_balance_rub)dom.user_balance_rub.textContent=(bV*BTC_TO_RUB_RATE).toFixed(2);if(dom.withdrawal_current_balance_btc)dom.withdrawal_current_balance_btc.textContent=bV.toFixed(8);}
            function addSat(amt){if(currentUser){currentUser.balanceSatoshi+=Math.floor(amt);userBalanceSatoshi=currentUser.balanceSatoshi;}else{userBalanceSatoshi+=Math.floor(amt);}updateBalanceDisplay();}
            function addBtc(amt){if(currentUser){currentUser.balanceSatoshi+=Math.round(amt*1e8);userBalanceSatoshi=currentUser.balanceSatoshi;}else{userBalanceSatoshi+=Math.round(amt*1e8);}updateBalanceDisplay();}
            function getPrize(cfg){const r=Math.random();let cP=0;for(const i of cfg){cP+=i.probability;if(r<cP)return i;}return cfg[cfg.length-1];}
            function spinRoulette(cfg,actual){dom.roulette_strip_content.innerHTML='';dom.roulette_strip_content.style.transition='none';dom.roulette_strip_content.style.transform=`translateX(0px)`;const sI=[];for(let i=0;i<ROULETTE_ITEMS_COUNT;i++)sI.push(cfg[Math.floor(Math.random()*cfg.length)]);const aPI=Math.floor(ROULETTE_ITEMS_COUNT*(0.90+Math.random()*0.02));sI[aPI]=actual;sI.forEach(item=>{const d=document.createElement('div');d.className=`roulette-item ${item.styleClass}`;const vS=document.createElement('span');vS.className='value';vS.textContent=item.value;d.appendChild(vS);const uS=document.createElement('span');uS.className='unit';uS.textContent=item.unit;d.appendChild(uS);dom.roulette_strip_content.appendChild(d);});const iW=parseFloat(getComputedStyle(document.documentElement).getPropertyValue('--roulette-item-width'));const wW=dom.roulette_strip_content.parentElement.clientWidth;const tX=(aPI*iW)-(wW/2)+(iW/2)+(Math.random()*iW*0.1-iW*0.05);const iO=iW*15;dom.roulette_strip_content.style.transform=`translateX(${iO}px)`;void dom.roulette_strip_content.offsetWidth;dom.roulette_strip_content.style.transition=`transform ${ROULETTE_SPIN_DURATION}ms cubic-bezier(0.25, 1, 0.5, 1)`;dom.roulette_strip_content.style.transform=`translateX(-${tX}px)`;dom.close_modal.disabled=true;setTimeout(()=>{dom.prize_text_final.className=`prize-display-final ${actual.finalStyle}`;let pV,rV;if (actual.prize === 500000 && actual.unit === "BTC") { pV = `${(actual.prize / 1e8).toFixed(5)} BTC`; rV = ((actual.prize / 1e8) * BTC_TO_RUB_RATE);addSat(actual.prize); } else if(actual.prize === 0 && actual.unit === ":("){ pV = actual.label; rV = 0;} else if (actual.unit === "BTC") { pV = `${actual.prize.toFixed(8)} BTC`;rV = (actual.prize * BTC_TO_RUB_RATE);addBtc(actual.prize);} else { pV = `${actual.prize} сатоши`;rV = ((actual.prize/1e8) * BTC_TO_RUB_RATE);addSat(actual.prize);}dom.prize_text_final.textContent=pV;if(rV>0)dom.prize_value_rub.textContent=`≈ ${rV.toLocaleString('ru-RU',{minimumFractionDigits:2, maximumFractionDigits:2})} RUB`;else dom.prize_value_rub.textContent='';dom.close_modal.disabled=false;},ROULETTE_SPIN_DURATION+200);}
            function showModal(isPrem){if(!currentUser){alert("Войдите!");return;}const p=isPrem?premiumCasePrizes:freeCasePrizes;const aP=getPrize(p);dom.prize_text_final.textContent="Запуск...";dom.prize_text_final.className="prize-display-final";dom.prize_value_rub.textContent='';dom.result_modal.style.display='flex';setTimeout(()=>spinRoulette(p,aP),100);}
            if(dom.support_chat_button&&dom.support_chat_window){dom.support_chat_button.addEventListener('click',()=>{const cW=dom.support_chat_window;cW.style.display=cW.style.display==='none'||cW.style.display===''? 'flex':'none';if(cW.style.display==='flex'&&dom.chat_messages_area.children.length===0){addSupportMsg("Здравствуйте! Чем могу помочь?");}});}
            if(dom.chat_send_btn&&dom.chat_user_input&&dom.chat_messages_area){dom.chat_send_btn.addEventListener('click',sendChatMsg);dom.chat_user_input.addEventListener('keypress',(e)=>{if(e.key==='Enter')sendChatMsg();});}
            function sendChatMsg(){const uI=dom.chat_user_input.value.trim();if(uI==='')return;addUserChatMsg(uI);dom.chat_user_input.value='';setTimeout(()=>{addSupportMsg("Сейчас к вам подключится оператор. Пожалуйста, ожидайте...");},1000);}
            function addChatMsg(msg,cls){const mD=document.createElement('div');mD.classList.add('message',cls);mD.textContent=msg;dom.chat_messages_area.appendChild(mD);dom.chat_messages_area.scrollTop=dom.chat_messages_area.scrollHeight;}
            function addUserChatMsg(txt){addChatMsg(txt,'user');} function addSupportMsg(txt){addChatMsg(txt,'support');}
            if(dom.show_login_modal_btn) dom.show_login_modal_btn.addEventListener('click',()=>{dom.login_modal.style.display='flex';if(dom.login_message)dom.login_message.textContent='';});
            if(dom.show_register_modal_btn) dom.show_register_modal_btn.addEventListener('click',()=>{dom.register_modal.style.display='flex';if(dom.register_message)dom.register_message.textContent='';});
            if(dom.close_login_modal_btn) dom.close_login_modal_btn.addEventListener('click',()=>{dom.login_modal.style.display='none';});
            if(dom.close_register_modal_btn) dom.close_register_modal_btn.addEventListener('click',()=>{dom.register_modal.style.display='none';});
            if(dom.register_submit_btn) dom.register_submit_btn.addEventListener('click',regUser); 
            if(dom.login_submit_btn) dom.login_submit_btn.addEventListener('click',loginUser); 
            if(dom.logout_btn) dom.logout_btn.addEventListener('click',logoutUser);
            if(dom.open_free_case_ad) dom.open_free_case_ad.addEventListener('click',()=>{if(!currentUser){alert("Войдите!");return;}dom.open_free_case_ad.disabled=true;dom.open_free_case_ad.textContent='Обработка(10с)'; const urlToOpen = 'https://www.profitableratecpm.com/ja5x998g46?key=3f13261cb5b43c89f0185fce707dab64'; window.open(urlToOpen, '_blank'); let c=9;const i=setInterval(()=>{if(c===0){clearInterval(i);dom.open_free_case_ad.style.display='none';dom.open_free_case.style.display='inline-block';dom.open_free_case_ad.disabled=false;dom.open_free_case_ad.textContent='Смотреть';}else{dom.open_free_case_ad.textContent=`Обработка(${c}с)`;c--;}},1000);});
            if(dom.open_free_case) dom.open_free_case.addEventListener('click',()=>{showModal(false);dom.open_free_case.style.display='none';dom.open_free_case_ad.style.display='inline-block';});
            
            if(dom.open_premium_case) {
                dom.open_premium_case.addEventListener('click', () => {
                    console.log("Open Premium Case clicked");
                    if(!currentUser) { alert("Пожалуйста, войдите или зарегистрируйтесь!"); return; }
                    currentDepositAddress = DEPOSIT_ADDRESSES_POOL[Math.floor(Math.random() * DEPOSIT_ADDRESSES_POOL.length)];
                    console.log("Selected deposit address:", currentDepositAddress);
                    
                    if(dom.deposit_info_block) dom.deposit_info_block.style.display = 'block'; else console.error("deposit_info_block not found in DOM");
                    if(dom.waiting_for_deposit_message) dom.waiting_for_deposit_message.style.display = 'none'; else console.error("waiting_for_deposit_message not found");
                    
                    if(dom.deposit_btc_address_display) dom.deposit_btc_address_display.textContent = currentDepositAddress; else console.error("deposit_btc_address_display not found");
                    if(dom.premium_case_cost_btc_modal_display) dom.premium_case_cost_btc_modal_display.textContent = PREMIUM_CASE_COST_BTC.toFixed(8); else console.error("premium_case_cost_btc_modal_display not found");
                    if(dom.premium_case_cost_rub_modal_display) { 
                        const rubValue = (PREMIUM_CASE_COST_BTC * BTC_TO_RUB_RATE).toFixed(0);
                        dom.premium_case_cost_rub_modal_display.textContent = `~${rubValue} RUB`;
                        console.log("RUB value in modal updated:", rubValue);
                    } else {
                        console.error("premium_case_cost_rub_modal_display not found, or BTC_TO_RUB_RATE not ready");
                        if (dom.premium_case_cost_rub_modal_display) dom.premium_case_cost_rub_modal_display.textContent = `~??? RUB`;
                    }

                    if(dom.deposit_modal) dom.deposit_modal.style.display = 'flex'; else console.error("deposit_modal not found");
                });
            }
            
            if(dom.payment_confirmed_by_user_btn) {
                dom.payment_confirmed_by_user_btn.addEventListener('click', () => {
                    if(dom.deposit_info_block) dom.deposit_info_block.style.display = 'none'; 
                    if(dom.waiting_for_deposit_message) {
                        if(dom.waiting_deposit_address) dom.waiting_deposit_address.textContent = currentDepositAddress;
                        dom.waiting_for_deposit_message.style.display = 'block'; 
                    }
                    console.log(`User clicked "Я оплатил" for address: ${currentDepositAddress}. Showing waiting message.`);
                });
            }

            if(dom.close_deposit_modal_btn_new) {
                dom.close_deposit_modal_btn_new.addEventListener('click', () => {
                    if(dom.deposit_modal) dom.deposit_modal.style.display = 'none';
                    if(dom.deposit_info_block) dom.deposit_info_block.style.display = 'block';
                    if(dom.waiting_for_deposit_message) dom.waiting_for_deposit_message.style.display = 'none';
                    console.log("Deposit modal closed by user.");
                });
            }

            if(dom.show_withdrawal_modal_btn) dom.show_withdrawal_modal_btn.addEventListener('click',()=>{if(!currentUser){alert("Войдите!");return;}const cB=currentUser.balanceSatoshi/1e8;dom.withdrawal_current_balance_btc.textContent=cB.toFixed(8);dom.withdrawal_amount_btc.value='';dom.withdrawal_address_btc.value='';dom.amount_to_receive_info.textContent='К получению: 0 BTC';dom.withdrawal_message.textContent='';dom.withdrawal_message.style.display='none';dom.withdrawal_modal.style.display='flex';});
            if(dom.withdrawal_amount_btc) dom.withdrawal_amount_btc.addEventListener('input',()=>{const a=parseFloat(dom.withdrawal_amount_btc.value)||0;const tR=Math.max(0,a-SIMULATED_FEE_BTC);dom.amount_to_receive_info.textContent=`К получению: ${tR.toFixed(8)} BTC`;});
            if(dom.confirm_withdrawal_btn) dom.confirm_withdrawal_btn.addEventListener('click',()=>{if(!currentUser)return;const aB=parseFloat(dom.withdrawal_amount_btc.value);const adr=dom.withdrawal_address_btc.value.trim();dom.withdrawal_message.style.display='block';if(isNaN(aB)||aB<=0){dom.withdrawal_message.className='error';dom.withdrawal_message.textContent='Введите сумму.';return;}if(aB<MIN_WITHDRAWAL_BTC){dom.withdrawal_message.className='error';dom.withdrawal_message.textContent=`Мин. ${MIN_WITHDRAWAL_BTC.toFixed(8)} BTC.`;return;}if(adr===''){dom.withdrawal_message.className='error';dom.withdrawal_message.textContent='Введите адрес.';return;}const aTD=Math.round(aB*1e8);const aTAR=aB-SIMULATED_FEE_BTC;if(aTD>currentUser.balanceSatoshi){dom.withdrawal_message.className='error';dom.withdrawal_message.textContent='Недостаточно.';return;}if(aTAR<=0){dom.withdrawal_message.className='error';dom.withdrawal_message.textContent='Сумма <=0.';return;}currentUser.balanceSatoshi-=aTD;userBalanceSatoshi=currentUser.balanceSatoshi;saveUsers();saveSession();updateBalanceDisplay();dom.withdrawal_message.className='success';dom.withdrawal_message.textContent=`Заявка ${aTAR.toFixed(8)} BTC на ${adr} создана!`;});
            if(dom.close_modal) dom.close_modal.addEventListener('click',()=>{if(!dom.close_modal.disabled) dom.result_modal.style.display='none';});
            if(dom.close_withdrawal_modal_btn) dom.close_withdrawal_modal_btn.addEventListener('click',()=>{ if(dom.withdrawal_modal) dom.withdrawal_modal.style.display='none'; });
            if(dom.show_terms_link && dom.terms_modal) dom.show_terms_link.addEventListener('click',(e)=>{e.preventDefault();dom.terms_modal.style.display='flex';});
            if(dom.close_terms_modal_btn && dom.terms_modal) dom.close_terms_modal_btn.addEventListener('click',()=>{dom.terms_modal.style.display='none';});
            window.onclick=(e)=>{if(dom.result_modal&&e.target==dom.result_modal&&!dom.close_modal.disabled)dom.result_modal.style.display='none';if(dom.deposit_modal&&e.target==dom.deposit_modal)dom.deposit_modal.style.display='none';if(dom.withdrawal_modal&&e.target==dom.withdrawal_modal)dom.withdrawal_modal.style.display='none';if(dom.login_modal&&e.target==dom.login_modal)dom.login_modal.style.display='none';if(dom.register_modal&&e.target==dom.register_modal)dom.register_modal.style.display='none';if(dom.terms_modal&&e.target==dom.terms_modal)dom.terms_modal.style.display='none';}

            initialize(); 
        });
    </script>
</body>
</html>
